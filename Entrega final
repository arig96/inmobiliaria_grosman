# ğŸ  Inmobiliaria Grosman â€“ DocumentaciÃ³n TÃ©cnica

## ğŸ“Œ IntroducciÃ³n

La base de datos **inmobiliaria\_grosman** modela la operatoria de una inmobiliaria: administraciÃ³n de propiedades, normalizaciÃ³n de tipos de propiedad y localidades, gestiÃ³n de clientes (dueÃ±os, compradores, inquilinos), registro de ventas y contratos de alquiler. Incluye vistas, Ã­ndices, triggers y stored procedures para optimizar consultas y automatizar reglas de negocio.

## ğŸ¯ Objetivo

DiseÃ±ar un esquema relacional **coherente, normalizado y performante** que permita:

* Publicar y consultar propiedades (en venta / alquiler).
* Registrar transacciones (ventas, alquileres) con reglas de negocio.
* Garantizar integridad referencial y calidad de datos.
* Exponer vistas y SPs para aplicaciones o BI.

## âš ï¸ SituaciÃ³n problemÃ¡tica

La inmobiliaria llevaba todos los procesos en papel: duplicaciÃ³n de datos, inconsistencias, tiempos lentos de bÃºsqueda y sin trazabilidad. Con la BD se unifican criterios, se evitan errores, se automatizan estados mediante triggers y se habilitan reportes confiables.

## ğŸ’¼ Modelo de negocio

* **Clientes**: dueÃ±os, inquilinos y compradores.
* **Empleados**: asesores asignados a propiedades.
* **Localidades** y **Tipos de Propiedad**: catÃ¡logos normalizados.
* **Propiedades**: entidad central; vinculada a un **cliente** (dueÃ±o), un **empleado**, una **localidad** y un **tipo**. Contiene flags `en_venta`, `en_alquiler` y estado derivado `vendida`.
* **Ventas**: una propiedad solo puede venderse una vez (constraint UNIQUE).
* **Alquileres**: triggers validan que no se alquilen propiedades vendidas ni se superpongan contratos.


## ğŸ—‚ï¸ Listado de tablas y columnas

> **PK**: clave primaria Â· **FK**: clave forÃ¡nea Â· **UK**: clave Ãºnica

### `localidades`

| Columna        | Tipo         | Clave | DescripciÃ³n         |
| -------------- | ------------ | ----- | ------------------- |
| id\_localidad  | INT AI       | PK    | Identificador Ãºnico |
| nombre         | VARCHAR(100) |       | Nombre localidad    |
| provincia      | VARCHAR(100) |       | Provincia           |
| codigo\_postal | VARCHAR(10)  |       | CÃ³digo postal       |

### `empleados`

| Columna      | Tipo         | Clave | DescripciÃ³n     |
| ------------ | ------------ | ----- | --------------- |
| id\_empleado | INT AI       | PK    | ID del empleado |
| nombre       | VARCHAR(100) |       | Nombre          |
| apellido     | VARCHAR(100) |       | Apellido        |
| email        | VARCHAR(100) |       | Email           |
| telefono     | VARCHAR(20)  |       | TelÃ©fono        |

### `clientes`

| Columna     | Tipo         | Clave        | DescripciÃ³n     |
| ----------- | ------------ | ------------ | --------------- |
| id\_cliente | INT AI       | PK           | ID cliente      |
| nombre      | VARCHAR(100) |              | Nombre          |
| apellido    | VARCHAR(100) |              | Apellido        |
| dni         | VARCHAR(20)  | UK, NOT NULL | Documento Ãºnico |
| email       | VARCHAR(100) |              | Email           |
| telefono    | VARCHAR(20)  |              | TelÃ©fono        |

### `tipos_propiedad`

| Columna             | Tipo        | Clave | DescripciÃ³n          |
| ------------------- | ----------- | ----- | -------------------- |
| id\_tipo\_propiedad | INT AI      | PK    | ID tipo de propiedad |
| nombre              | VARCHAR(50) | UK    | Nombre oficial       |

### `propiedades`

| Columna             | Tipo            | Clave | DescripciÃ³n                   |
| ------------------- | --------------- | ----- | ----------------------------- |
| id\_propiedad       | INT AI          | PK    | ID propiedad                  |
| direccion           | VARCHAR(255)    |       | Domicilio                     |
| id\_localidad       | INT             | FK    | Localidad                     |
| id\_tipo\_propiedad | INT             | FK    | Tipo                          |
| ambientes           | SMALLINT UNSIGN |       | NÃºmero de ambientes           |
| superficie          | INT UNSIGNED    |       | mÂ² (>0)                       |
| precio              | DECIMAL(12,2)   |       | Precio listado                |
| en\_alquiler        | TINYINT(1)      |       | Flag publicaciÃ³n alquiler     |
| en\_venta           | TINYINT(1)      |       | Flag publicaciÃ³n venta        |
| vendida             | TINYINT(1)      |       | Estado derivado (triggers)    |
| id\_empleado        | INT             | FK    | Asesor asignado               |
| id\_cliente         | INT             | FK    | Propietario                   |
| precio\_m2          | DECIMAL(10,2)   | GEN   | Calculado (precio/superficie) |

### `ventas`

| Columna       | Tipo          | Clave  | DescripciÃ³n       |
| ------------- | ------------- | ------ | ----------------- |
| id\_venta     | INT AI        | PK     | ID venta          |
| id\_propiedad | INT           | FK, UK | Propiedad vendida |
| id\_comprador | INT           | FK     | Cliente comprador |
| fecha\_venta  | DATE          |        | Fecha             |
| precio\_venta | DECIMAL(12,2) |        | Precio de venta   |

### `alquileres`

| Columna         | Tipo          | Clave | DescripciÃ³n         |
| --------------- | ------------- | ----- | ------------------- |
| id\_alquiler    | INT AI        | PK    | ID alquiler         |
| id\_propiedad   | INT           | FK    | Propiedad alquilada |
| id\_inquilino   | INT           | FK    | Cliente inquilino   |
| fecha\_inicio   | DATE          |       | Inicio contrato     |
| fecha\_fin      | DATE          |       | Fin contrato / NULL |
| precio\_mensual | DECIMAL(10,2) |       | Canon mensual       |

## ğŸ’» Scripts de creaciÃ³n

> Ver el cÃ³digo en [`scripts/ddl.sql`](scripts/ddl.sql) para la creaciÃ³n completa (tablas, Ã­ndices, triggers, vistas).

## ğŸ“¥ Scripts de inserciÃ³n

> Ver el cÃ³digo en [`scripts/dml.sql`](scripts/dml.sql) para inserciÃ³n de datos de ejemplo (localidades, empleados, clientes, propiedades, ventas y alquileres).

## ğŸ”§ Objetos avanzados

Triggers: actualizan automÃ¡ticamente estados (vendida, en_venta) y evitan errores (alquileres solapados o sobre propiedades vendidas).

Vista vista_propiedades_master: consulta consolidada de propiedades con datos de propietario, asesor, localidad y tipo.

Stored Procedures: bÃºsquedas por localidad, listado de propiedades en venta, registro de ventas y alquileres con validaciones.


## ğŸ“Š Recursos
- ğŸ–¼ **[Diagrama Entidadâ€“RelaciÃ³n]()**
- ğŸ’» **[CÃ³digo SQL completo]()**

Autor:
Ariel Grosman

